!function(a){jQuery.fn.touchgesture=function(b){return"string"==typeof b&&(b={method:b}),b.method&&b.method in a.touchgestures.methods?this.each(function(){var c=a(this).data("touchgestures")||{};c[b.method]=a.touchgestures.methods[b.method].initialize.call(this,b),a(this).data("touchgestures",c)}):this},a.touchgestures={methods:{},helpers:{simulateMouseEvent:function(a,b){if(!(a.originalEvent.touches.length>1)){var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}}},a.ui&&a.ui.mouse&&"ontouchend"in document&&(a.touchgestures.mouse_prototype=a.ui.mouse.prototype,a.touchgestures.mouse_prototype_init=a.ui.mouse.prototype._mouseInit,a.touchgestures.mouse_prototype._mouseInit=function(){var b=this;this.element.on("touchstart touchmove touchend",function(c){var d=null,e=b.element;for(var f in e.data("touchgestures")||{})d=a.touchgestures.methods[f];d&&d.dispatch_event.call(d,e,c)}),a.touchgestures.mouse_prototype_init.call(b)})}(jQuery),function(a){a.touchgestures.methods.draggablex={initialize:function(b){b.animation_threshold_x="animation_threshold_x"in b?b.animation_threshold_x:10,b.activation_threshold_x="activation_threshold_x"in b?b.activation_threshold_x:50,b.deactivation_threshold_y="deactivation_threshold_y"in b?b.deactivation_threshold_y:10;var c={revert:!0,axis:"x"};return b.drag&&(c.drag=b.drag),b.revert&&(c.revert=b.revert),a(this).draggable(c),b},dispatch_event:function(b,c){var d=b.data("touchgestures").draggablex,e=c.originalEvent.changedTouches[0];switch(c.type){case"touchstart":return d.runtime={moved:!1,handled:!1,disabled:!1,animation:!1},a.touchgestures.helpers.simulateMouseEvent(c,"mouseover"),a.touchgestures.helpers.simulateMouseEvent(c,"mousemove"),void a.touchgestures.helpers.simulateMouseEvent(c,"mousedown");case"touchend":return a.touchgestures.helpers.simulateMouseEvent(c,"mouseup"),a.touchgestures.helpers.simulateMouseEvent(c,"mouseout"),d.runtime.moved||a.touchgestures.helpers.simulateMouseEvent(c,"click"),void delete d.runtime;case"touchmove":return d.runtime.moved||(d.runtime.moved=!0,d.runtime.x=e.clientX,d.runtime.y=e.clientY),d.runtime.handled||d.runtime.disabled||(Math.abs(e.clientX-d.runtime.x)>d.animation_threshold_x&&(d.runtime.animation=!0),Math.abs(e.clientX-d.runtime.x)>d.activation_threshold_x?d.runtime.handled=!0:Math.abs(e.clientY-d.runtime.y)>d.deactivation_threshold_y&&(d.runtime.disabled=!0)),void(d.runtime.handled?(a.touchgestures.helpers.simulateMouseEvent(c,"mousemove"),c.preventDefault()):!d.runtime.disabled&&d.runtime.animation&&a.touchgestures.helpers.simulateMouseEvent(c,"mousemove"));default:return}}}}(jQuery),function(a){a.touchgestures.methods.sortabley={initialize:function(b){return b.runtime=a(b.parent).data("touchgestures-sortabley")||{},a(b.parent).data("touchgestures-sortabley",b.runtime),a(b.parent).sortable({axis:"y",stop:function(){a(b.parent).sortable("disable"),b.runtime.sorting=!1,b.stop&&b.stop()}}),a(b.parent).sortable("enable"),b},dispatch_event:function(b,c){{var d=b.data("touchgestures").sortabley;c.originalEvent.changedTouches[0]}switch(c.type){case"touchstart":a.touchgestures.helpers.simulateMouseEvent(c,"mouseover"),a.touchgestures.helpers.simulateMouseEvent(c,"mousemove"),a.touchgestures.helpers.simulateMouseEvent(c,"mousedown");var e=a(c.target);if(d.runtime.sorting||d.runtime.started)return;return d.runtime.started=!0,void(d.runtime.touch_timeout=setTimeout(function(){a(d.parent).sortable("enable"),d.runtime.sorting=!0,d.start&&d.start.call(c.target),setTimeout(function(){a.touchgestures.methods.sortabley.dispatch_event(e,c)},1)},250));case"touchend":if(a.touchgestures.helpers.simulateMouseEvent(c,"mouseup"),a.touchgestures.helpers.simulateMouseEvent(c,"mouseout"),d.runtime.moved||a.touchgestures.helpers.simulateMouseEvent(c,"click"),d.runtime.sorting)return;return d.runtime.started=!1,d.runtime.moved=!1,d.runtime.sorting=!1,void clearTimeout(d.runtime.touch_timeout);case"touchmove":return d.runtime.moved||(d.runtime.moved=!0),a.touchgestures.helpers.simulateMouseEvent(c,"mousemove"),void(d.runtime.sorting?c.preventDefault():clearTimeout(d.runtime.touch_timeout));default:return}}}}(jQuery);
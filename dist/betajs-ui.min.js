/*!
betajs-ui - v1.0.51 - 2019-03-10
Copyright (c) Victor Lingenthal,Oliver Friedmann
Apache-2.0 Software License.
*/

var Scoped=function(){var _=function(){return{get:function(t){return"undefined"!=typeof window?t?window[t]:window:"undefined"!=typeof global?t?global[t]:global:"undefined"!=typeof self?t?self[t]:self:undefined},set:function(t,e){return"undefined"!=typeof window&&(window[t]=e),"undefined"!=typeof global&&(global[t]=e),"undefined"!=typeof self&&(self[t]=e),e},getPath:function(t){if(!t)return this.get();var e=t.split(".");if(1==e.length)return this.get(t);for(var n=this.get(e[0]),i=1;i<e.length;++i){if(!n)return n;n=n[e[i]]}return n},setPath:function(t,e){var n=t.split(".");if(1==n.length)return this.set(t,e);for(var i=this.get(n[0])||this.set(n[0],{}),s=1;s<n.length-1;++s)n[s]in i||(i[n[s]]={}),i=i[n[s]];return i[n[n.length-1]]=e}}}.call(this),p=function(){return{method:function(t,e){return function(){return e.apply(t,arguments)}},extend:function(t,e){for(var n in t=t||{},e=e||{})t[n]=e[n];return t},typeOf:function(t){return"[object Array]"===Object.prototype.toString.call(t)?"array":typeof t},isEmpty:function(t){if(null==t)return!0;if("array"==this.typeOf(t))return 0===t.length;if("object"!=typeof t)return!1;for(var e in t)return!1;return!0},matchArgs:function(t,e){var n=0,i={};for(var s in e)!0===e[s]||this.typeOf(t[n])==e[s]?(i[s]=t[n],n++):"undefined"==this.typeOf(t[n])&&n++;return i},stringify:function(t){return"function"==this.typeOf(t)?""+t:JSON.stringify(t)}}}.call(this),r=function(){return{__namespace:"Scoped",__revert:null,upgrade:function(t){var e=_.get(t||r.__namespace);if(e&&"object"==p.typeOf(e)&&e.guid==this.guid&&"string"==p.typeOf(e.version)){for(var n=this.version.split("."),i=e.version.split("."),s=!1,o=0;o<Math.min(n.length,i.length)&&(s=parseInt(n[o],10)>parseInt(i[o],10),n[o]==i[o]);++o);return s?this.attach(t):e}return this.attach(t)},attach:function(t){t&&(r.__namespace=t);var e=_.get(r.__namespace);if(e==this)return this;if(r.__revert=e)try{var n=e.__exportScoped();this.__exportBackup=this.__exportScoped(),this.__importScoped(n)}catch(i){}return _.set(r.__namespace,this),this},detach:function(t){return t&&_.set(r.__namespace,null),"undefined"!=typeof r.__revert&&_.set(r.__namespace,r.__revert),delete r.__revert,r.__exportBackup&&this.__importScoped(r.__exportBackup),this},exports:function(t,e,n){return"object"==typeof(t=t||("undefined"!=typeof module?module:null))&&t&&"exports"in t&&(n||t.exports==this||!t.exports||p.isEmpty(t.exports))&&(t.exports=e||this),this}}}.call(this);function m(t){var r={tree:"boolean"==typeof t.tree&&t.tree,global:"boolean"==typeof t.global&&t.global,root:"object"==typeof t.root?t.root:{}};function s(t){return{route:"string"==typeof t.route?t.route:null,parent:"object"==typeof t.parent?t.parent:null,ready:"boolean"==typeof t.ready&&t.ready,children:{},watchers:[],data:{},lazy:[]}}var a=s({ready:!0});if(r.tree)if(r.global){try{window&&(a.data=window)}catch(e){}try{global&&(a.data=global)}catch(e){}try{self&&(a.data=self)}catch(e){}}else a.data=r.root;function l(t){if(!t.ready)if(!t.parent||t.parent.ready){if(t.route&&t.parent&&t.route in t.parent.data){t.data=t.parent.data[t.route],t.ready=!0;for(var e=0;e<t.watchers.length;++e)t.watchers[e].callback.call(t.watchers[e].context||this,t.data);for(var n in t.watchers=[],t.children)l(t.children[n])}}else l(t.parent)}function o(t,e){if("object"==typeof e&&t.ready)for(var n in e)t.data[n]=e[n];else t.data=e;if("object"==typeof e)for(var i in e)t.children[i]&&(t.children[i].data=e[i]);for(var s in function o(t){if(!t.ready){t.parent&&!t.parent.ready&&o(t.parent),t.ready=!0,t.parent&&r.tree&&"object"==typeof t.parent.data&&(t.parent.data[t.route]=t.data);for(var e=0;e<t.watchers.length;++e)t.watchers[e].callback.call(t.watchers[e].context||this,t.data);t.watchers=[]}}(t),t.children)l(t.children[s])}function c(t){if(!t)return a;for(var e=t.split("."),n=a,i=0;i<e.length;++i)e[i]in n.children?n=n.children[e[i]]:(n.children[e[i]]=s({parent:n,route:e[i]}),l(n=n.children[e[i]]));return n}return{extend:function(t,e){o(c(t),e)},set:function(t,e){var n=c(t);n.data&&function i(t){if(t.ready&&t.data)for(var e in t.data)delete t.data[e]}(n),o(n,e)},get:function(t){var e=c(t);return e.ready?e.data:null},lazy:function(t,e,n){var i=c(t);i.ready?e(n||this,i.data):i.lazy.push({callback:e,context:n})},digest:function(t){l(c(t))},obtain:function(t,e,n){!function s(t,e,n){if(t.ready)e.call(n||this,t.data);else if(t.watchers.push({callback:e,context:n}),0<t.lazy.length){var i=function(t){if(0<t.lazy.length){var e=t.lazy.shift();e.callback.call(e.context||this,t.data),i(t)}};i(t)}}(c(t),e,n)},unresolvedWatchers:function(t){return function o(t,e,n){for(var i in n=n||[],!(t=t||a).ready&&0===t.lazy.length&&0<t.watchers.length&&n.push(e),t.children){var s=t.children[i];n=o(s,(e?e+".":"")+s.route,n)}return n}(c(t),t)},__export:function(){return{options:r,nsRoot:a}},__import:function(t){r=t.options,a=t.nsRoot}}}var e=m({tree:!0,global:!0}),n=m({tree:!0}),i=function f(t,e,n,i){var s=null,o=[],r=e,a=n,l=i,c=m({tree:!0}),h=m({tree:!1}),d={global:{namespace:l},root:{namespace:a},local:{namespace:c},"default":{namespace:h},parent:{namespace:r},scope:{namespace:c,readonly:!1}},u=function(o,r,a){var l=p.matchArgs(o,{options:"object",namespaceLocator:!0,dependencies:"array",hiddenDependencies:"array",callback:!0,context:"object"}),t=p.extend({lazy:this.options.lazy},l.options||{}),c=this.resolve(l.namespaceLocator),e=function(){this.require(l.dependencies,l.hiddenDependencies,function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);if(t[t.length-1].ns=c,this.options.compile){for(var n=[],i=0;i<o.length;++i)n.push(p.stringify(o[i]));this.compiled+=this.options.ident+"."+r+"("+n.join(", ")+");\n\n"}this.options.dependencies&&(this.dependencies[c.path]=this.dependencies[c.path]||{},l.dependencies&&l.dependencies.forEach(function(t){this.dependencies[c.path][this.resolve(t).path]=!0},this),l.hiddenDependencies&&l.hiddenDependencies.forEach(function(t){this.dependencies[c.path][this.resolve(t).path]=!0},this));var s=this.options.compile?{}:l.callback.apply(l.context||this,t);a.call(this,c,s)},this)};return t.lazy?c.namespace.lazy(c.path,e,this):e.apply(this),this};return{getGlobal:p.method(_,_.getPath),setGlobal:p.method(_,_.setPath),options:{lazy:!1,ident:"Scoped",compile:!1,dependencies:!1},compiled:"",dependencies:{},nextScope:function(){return s||(s=f(this,c,a,l)),s},subScope:function(){var t=this.nextScope();return o.push(t),s=null,t},binding:function(t,e,n){var i;return d[t]&&d[t].readonly||(i="string"!=p.typeOf(e)?{namespace:m({tree:!0,root:e}),path:null}:this.resolve(e),d[t]=p.extend(n,i)),this},resolve:function(t){var e=t.split(":");if(1==e.length)throw"The locator '"+e[0]+"' requires a namespace.";var n=d[e[0]];if(!n)throw"The namespace '"+e[0]+"' has not been defined (yet).";return{namespace:n.namespace,path:n.path&&e[1]?n.path+"."+e[1]:n.path||e[1]}},define:function(){return u.call(this,arguments,"define",function(t,e){if(t.namespace.get(t.path))throw"Scoped namespace "+t.path+" has already been defined. Use extend to extend an existing namespace instead";t.namespace.set(t.path,e)})},assumeVersion:function(){var o=p.matchArgs(arguments,{assumption:!0,dependencies:"array",callback:!0,context:"object",error:"string"}),t=o.dependencies||[];t.unshift(o.assumption),this.require(t,function(){var t=arguments,e=t[0].replace(/[^\d\.]/g,"");t[0]=e.split(".");for(var n=0;n<t[0].length;++n)t[0][n]=parseInt(t[0][n],10);if("function"===p.typeOf(o.callback)){if(!o.callback.apply(o.context||this,o))throw"Scoped Assumption '"+o.assumption+"' failed, value is "+e+(o.error?", but assuming "+o.error:"")}else for(var i=(o.callback+"").replace(/[^\d\.]/g,"").split("."),s=0;s<Math.min(t[0].length,i.length);++s)if(parseInt(i[s],10)>t[0][s])throw"Scoped Version Assumption '"+o.assumption+"' failed, value is "+e+", but assuming at least "+o.callback})},extend:function(){return u.call(this,arguments,"extend",function(t,e){t.namespace.extend(t.path,e)})},require:function(){var e=p.matchArgs(arguments,{dependencies:"array",hiddenDependencies:"array",callback:"function",context:"object"});e.callback=e.callback||function(){};var t=e.dependencies||[],n=t.concat(e.hiddenDependencies||[]),i=n.length,s=[],o={};if(i)for(var r=function(t){this.i<s.length&&(s[this.i]=t),0==--i&&(s.push(o),e.callback.apply(e.context||this.ctx,s))},a=0;a<n.length;++a){var l=this.resolve(n[a]);a<t.length&&s.push(null),l.namespace.obtain(l.path,r,{ctx:this,i:a})}else s.push(o),e.callback.apply(e.context||this,s);return this},digest:function(t){var e=this.resolve(t);return e.namespace.digest(e.path),this},unresolved:function(t){var e=this.resolve(t);return e.namespace.unresolvedWatchers(e.path)},__export:function(){return{parentNamespace:r.__export(),rootNamespace:a.__export(),globalNamespace:l.__export(),localNamespace:c.__export(),privateNamespace:h.__export()}},__import:function(t){r.__import(t.parentNamespace),a.__import(t.rootNamespace),l.__import(t.globalNamespace),c.__import(t.localNamespace),h.__import(t.privateNamespace)}}}(0,n,n,e),t=p.extend(i,function(){return{guid:"4b6878ee-cb6a-46b3-94ac-27d91f58d666",version:"0.0.19",upgrade:r.upgrade,attach:r.attach,detach:r.detach,exports:r.exports,__exportScoped:function(){return{globalNamespace:e.__export(),rootNamespace:n.__export(),rootScope:i.__export()}},__importScoped:function(t){e.__import(t.globalNamespace),n.__import(t.rootNamespace),i.__import(t.rootScope)}}}.call(this));return(t=t.upgrade()).exports(),t}.call(this);(function(){var t=this.subScope();t.binding("module","global:BetaJS.UI"),t.binding("base","global:BetaJS"),t.binding("browser","global:BetaJS.Browser"),t.binding("dynamics","global:BetaJS.Dynamics"),t.define("module:",function(){return{guid:"ff8d5222-1ae4-4719-b842-1dedb9162bc0",version:"1.0.51",datetime:1552273712900}}),t.assumeVersion("base:version","~1.0.96"),t.assumeVersion("browser:version","~1.0.62"),t.define("module:Dynamics.GesturePartial",["dynamics:Handlers.Partial","module:Gestures.Gesture","module:Gestures","base:Objs"],["module:Gestures.defaultGesture"],function(t,o,r,a,e){var n=t.extend({scoped:e},function(t){return{_apply:function(t){var e=this._node,n=e._handler;if(e.gestures=e.gestures||{},!(this._postfix in e.gestures)||e.gestures[this._postfix].destroyed()){t=a.extend(t,t.options);var i=this._node.element(),s=new o(i,r.defaultGesture(t));(e.gestures[this._postfix]=s).on("activate",function(){t.activate_event&&n.call(t.activate_event,t.data,this._node,s),t.interaction&&e.interactions&&e.interactions[t.interaction]&&e.interactions[t.interaction].start&&e.interactions[t.interaction].start()},this),s.on("deactivate",function(){t.deactivate_event&&n.call(t.deactivate_event,t.data,this._node,s),t.interaction&&e.interactions&&e.interactions[t.interaction]&&e.interactions[t.interaction].stop&&e.interactions[t.interaction].stop()},this),t.transition_event&&s.on("start",function(){n.call(t.transition_event,i,s)},this)}},_deactivate:function(){this.__release()},__release:function(){var t=this._node;t.gestures=t.gestures||{},this._postfix in t.gestures&&t.gestures[this._postfix].weakDestroy(),delete t.gestures[this._postfix]},destroy:function(){this.__release(),t.destroy.call(this)}}});return n.register("ba-gesture"),n}),t.define("module:Dynamics.InteractionPartial",["dynamics:Handlers.Partial","module:Interactions","base:Strings","base:Objs","base:Types"],function(t,a,l,c,h,e){var n=t.extend({scoped:e},function(t){return{_apply:function(t){var e=this._node,o=e._handler;if(e.interactions=e.interactions||{},this._postfix in e.interactions&&!e.interactions[this._postfix].destroyed())e.interactions[this._postfix].data=t.data;else{t=c.extend(t,t.options);var n=a[l.capitalize(t.type)];if(n){if(!t.disabled){var i=this._node.element();i=t.sub?i.querySelector(t.sub):t.parent_elem?i.parentElement:i;var s=t.items?this._node.element().querySelector(t.items):undefined,r=new n(i,c.extend({enabled:!0,context:o,itemsElement:s},t),t.data);e.interactions[this._postfix]=r,c.iter(t.events,function(s,t){r.on(t,function(t,e,n,i){h.is_string(s)?o.call(s,this._value.data,t,e,n,i):s.call(o,this._value.data,t,e,n,i)},this)},this)}}else console.log("Could not find interaction: "+l.capitalize(t.type))}},_deactivate:function(){this.__release()},__release:function(){var t=this._node;t.interactions=t.interactions||{},this._postfix in t.interactions&&t.interactions[this._postfix].weakDestroy()},destroy:function(){this.__release(),t.destroy.call(this)}}});return n.register("ba-interaction"),n}),t.define("module:Elements.Animators",["base:Class","base:Objs","browser:Dom"],function(t,o,r,e){return t.extend({scoped:e},function(s){return{constructor:function(t,e,n,i){s.constructor.call(this),this._element=r.unbox(t),this._options=o.extend({callback_on_revert:!0,callback_on_complete:!0,auto_start:!0,auto_destroy:!0},e),this._callback=n,this._context=i,this._running=!1,this._options.auto_start&&this.start()},start:function(){this._running||(this._running=!0,this._start())},revert:function(){this._running&&(this._running=!1,this._revert())},complete:function(){this._running&&this._complete()},__callback:function(){this.destroyed()||(this._callback.apply(this._context||this),this._options&&this._options.auto_destroy&&this.destroy())},_finished:function(){this.__callback()},_reverted:function(){this._options.callback_on_revert&&this.__callback()},_completed:function(){this._options.callback_on_complete&&this.__callback()},_start:function(){this._finished()},_revert:function(){this._reverted()},_complete:function(){this._completed()}}})}),t.define("module:Elements.DefaultAnimator",["module:Elements.Animators","base:Objs","base:Types","base:Timers.Timer"],function(t,r,a,l,e){return t.extend({scoped:e},function(s){var o={linear:function(t){return t},swing:function(t){return Math.sin(t*Math.PI/2)}};return{constructor:function(t,e,n,i){e=r.extend({duration:250,delay:10,styles:{},method:"swing"},e),a.is_string(e.method)&&(e.method=o[e.method]||o.linear),this.__timer=this.auto_destroy(new l({delay:e.delay,start:!1,context:this,fire:this.__fire})),s.constructor.call(this,t,e,n,i)},__setProgress:function(n){n=Math.max(0,Math.min(1,n)),r.iter(this.__styles,function(t,e){t.target[e]=Math.round(t.start+(t.end-t.start)*n)+t.postfix},this)},__fire:function(){this.__setProgress(this._options.method(this.__timer.duration()/this._options.duration)),this.__timer.duration()>=this._options.duration&&this._complete()},_start:function(){this.__completed=!1,this.__timer.stop(),this.__styles=r.map(this._options.styles,function(t,e){var n=e in this._element?this._element:this._element.style;return{target:n,start:parseFloat(n[e]),end:parseFloat(t),postfix:a.is_string(t)?t.replace(/[\d\.]/g,""):""}},this),this.__timer.start()},_revert:function(){this.__timer.stop(),this.__setProgress(0),this._reverted()},_complete:function(){this.__completed||(this.__completed=!0,this.__setProgress(1),this.__timer.stop(),this._completed())}}})}),t.define("module:Elements.ElementModifier",["base:Class","browser:Dom"],function(t,i,e){return t.extend({scoped:e},function(e){return{constructor:function(t){e.constructor.call(this),this._element=i.unbox(t),this._css={},this._cls={}},css:function(t,e){return arguments.length<2?this._element.style[t]:this._element.style[t]===e?e:(t in this._css||(this._css[t]=this._element.style[t]),this._element.style[t]=e)},csscls:function(t,e){var n=i.elementHasClass(this._element,t);return arguments.length<2?t:(n===e||(t in this._cls||(this._cls[t]=n),e?i.elementAddClass(this._element,t):i.elementRemoveClass(this._element,t)),e)},removeClass:function(t){i.elementHasClass(this._element,t)&&(t in this._cls||(this._cls[t]=!0),i.elementAddClass(this._element,t))},revert:function(){for(var t in this._css)this._element.style[t]=this._css[t];for(t in this._cls)this._cls[t]?i.elementAddClass(this._element,t):i.elementRemoveClass(this._element,t)}}})}),t.define("module:Events.Mouse",["browser:Info"],function(t){return{downEvent:function(){return t.isMobile()?"touchstart":"mousedown"},moveEvent:function(){return t.isMobile()?"touchmove":"mousemove"},upEvent:function(){return t.isMobile()?"touchend":"mouseup"},clickEvent:function(){return t.isMobile()?"touchstart":"click"},customCoords:function(t,e,n){if(t.touches&&t.touches.length){var i=t.touches;if(n){for(var s=[],o=0;o<i.length;++o)s.push({x:i[o][e+"X"],y:i[o][e+"Y"]});return s}return{x:i[0][e+"X"],y:i[0][e+"Y"]}}var r={x:t[e+"X"],y:t[e+"Y"]};return n?[r]:r},pageCoords:function(t,e){return this.customCoords(t,"page",e)},clientCoords:function(t,e){return this.customCoords(t,"client",e)},screenCoords:function(t,e){return this.customCoords(t,"screen",e)}}}),t.define("module:Events.Support",["base:Objs","base:Types","browser:Dom"],function(o,r,a){return{dispatchElementEvent:function(t,e,n,i){a.triggerDomEvent(t,e,{},o.extend({bubbles:!0,cancelable:!0,detail:n},i))},dispatchElementsEvent:function(t,e,n,i){for(var s=0;s<t.length;++s)a.triggerDomEvent(t[s],e,{},o.extend({bubbles:!1,cancelable:!0,detail:n},i))},dispatchManualBubbleEvent:function(t,e,n,i,s){for(var o=[],r=a.unbox(t);r;)n(r)&&o.push(r),r=r.parentNode;this.dispatchElementsEvent(o,e,i,s)},dispatchPointsSeparatorEvent:function(t,e,n,i,s,o){n=n?r.is_array(n)?n:[n]:[],i=i?r.is_array(i)?i:[i]:[],this.dispatchManualBubbleEvent(t,e,function(t){for(var e=0;e<n.length;++e)if(!a.pointWithinElement(n[e].x,n[e].y,t))return!1;for(e=0;e<i.length;++e)if(a.pointWithinElement(i[e].x,i[e].y,t))return!1;return!0},s,o)}}}),t.define("module:Gestures.ElementStateHost",["base:States.CompetingHost","module:Gestures.GestureStates","base:Classes.ClassRegistry","browser:Dom"],function(t,i,s,o,e){return t.extend({scoped:e},function(n){return{constructor:function(t,e){n.constructor.call(this,e,{stateRegistry:new s(i)}),this._element=o.unbox(t)},element:function(){return this._element}}})}),t.define("module:Gestures.Gesture",["module:Gestures.ElementStateHost","base:States.CompetingComposite","base:Objs","module:Gestures.GestureStates.EventDrivenState","browser:Dom"],function(t,o,r,a,l,e){return t.extend({scoped:e},function(s){return{constructor:function(t,e){var n=(t=l.unbox(t)).gestures_handler;for(var i in n||(n=new o,t.gestures_handler=n),s.constructor.call(this,t,n),e)e[i]=r.extend({priority:1,exclusive:!1,retreat:"Retreat"},e[i]);this.initialize(a,{state_descriptor:e,current_state:"Initial"})}}})}),t.define("module:Gestures.ElementState",["base:States.CompetingState","base:Ids","base:Objs","browser:Events"],function(t,e,n,i,s){return t.extend({scoped:s},function(t){return{_persistents:["client_pos","screen_pos"],constructor:function(){t.constructor.apply(this,arguments),this._domevents=this.auto_destroy(new i)},_start:function(){t._start.call(this),this.on("mousemove touchmove",function(t){var e="mousemove"==t.type?t:t.touches[0];this._client_pos={x:e.clientX,y:e.clientY},this._screen_pos={x:e.screenX,y:e.screenY}})},element:function(){return this.host.element()},on:function(t,e){this._domevents.on(this.element(),t,function(t){e.call(this,t)},this)},_end:function(){this._domevents.clear()},trigger:function(){this.host.trigger.apply(this.host,arguments)}}})}),t.define("module:Gestures.ElementEvent",["base:Class","base:Ids","base:Objs","browser:Events","browser:Dom"],function(t,e,n,s,o,i){return t.extend({scoped:i},function(i){return{constructor:function(t,e,n){i.constructor.call(this),this._element=t,this._callback=e,this._context=n,this._domevents=this.auto_destroy(new s)},callback:function(){this._callback&&this._callback.apply(this._context,arguments)},on:function(t,e,n,i){i=o.unbox(i||this._element),t.split(" ").forEach(function(t){this._domevents.on(i,t,function(t){return e.apply(this,arguments)},n||this)},this)}}})}),t.define("module:Gestures.ElementTriggerEvent",["module:Gestures.ElementEvent"],function(t,e){return t.extend({scoped:e},function(s){return{constructor:function(t,e,n,i){s.constructor.call(this,e,n,i),this.on(t,function(t){this.callback(t)})}}})}),t.define("module:Gestures.BodyTriggerEvent",["module:Gestures.ElementEvent"],function(t,e){return t.extend({scoped:e},function(s){return{constructor:function(t,e,n,i){s.constructor.call(this,e,n,i),this.on(t,function(t){this.callback(t)},this,document.body)}}})}),t.define("module:Gestures.ElementTimerEvent",["module:Gestures.ElementEvent"],function(t,e){return t.extend({scoped:e},function(o){return{constructor:function(t,e,n,i){o.constructor.call(this,e,n,i);var s=this;t<=0||(this._timer=setTimeout(function(){s.callback()},t))},destroy:function(){clearTimeout(this._timer),o.destroy.call(this)}}})}),t.define("module:Gestures.ElementScrollEvent",["module:Gestures.ElementEvent","base:Time"],function(t,e,n){return t.extend({scoped:n},function(s){return{constructor:function(t,e,n,i){s.constructor.call(this,e,n,i),this.last_scroll_event=null,this.scroll_start_event=null,this.scroll_threshold=t.threshold,this.on("scroll",this.__scroll,this,t.element)},__scroll:function(){if(!this.destroyed()){var t=e.now();if(null===this.scroll_start_event||this.last_scroll_event&&50<t-this.last_scroll_event)return this.scroll_start_event=t,void(this.last_scroll_event=t);(this.last_scroll_event=t)-this.scroll_start_event>this.scroll_threshold&&this.callback()}}}})}),t.define("module:Gestures.ElementScrollEndEvent",["module:Gestures.ElementEvent","base:Time"],function(t,e,n){return t.extend({scoped:n},function(s){return{constructor:function(t,e,n,i){s.constructor.call(this,e,n,i),this.__fire(),this.on("scroll",this.__fire,this,t.element)},__fire:function(){if(!this.destroyed()){this.timer&&clearTimeout(this.timer);var t=this;this.timer=setTimeout(function(){t.callback()},50)}}}})}),t.define("module:Gestures.ElementMouseMoveOutEvent",["module:Gestures.ElementEvent","module:Events.Mouse"],function(t,a,e){return t.extend({scoped:e},function(r){return{constructor:function(n,t,e,i){r.constructor.call(this,t,e,i);var s={},o={x:0,y:0};this.on(a.moveEvent(),function(t){s.x||s.y||(s=a.pageCoords(t));var e=a.pageCoords(t);o.x=Math.max(o.x,Math.abs(s.x-e.x)),o.y=Math.max(o.y,Math.abs(s.y-e.y)),("x"in n&&0<=n.x&&o.x>=n.x||"y"in n&&0<=n.y&&o.y>=n.y)&&this.callback()})}}})}),t.define("module:Gestures.GestureStates.EventDrivenState",["module:Gestures.ElementState","module:Gestures"],function(t,s,e){return t.extend({scoped:e},function(i){return{_persistents:["client_pos","screen_pos","state_descriptor"],_locals:["current_state"],_state_descriptor:null,_current_state:null,current_state:function(){return this._state_descriptor[this._current_state]},description:function(){return this._current_state},nextDrivenState:function(t){this.next("EventDrivenState",{current_state:t})},_start:function(){i._start.call(this);var t=this.current_state();t.start&&t.start.apply(this),t.events=t.events||[];for(var e=function(e){this._auto_destroy(new s[e.event](e.args,this.element(),function(t){e.stop_propagation&&(t.stopPropagation(),t.preventDefault()),this.nextDrivenState(e.target)},this))},n=0;n<t.events.length;++n)e.call(this,t.events[n])},_end:function(){var t=this.current_state();t.end&&t.end.apply(this),i._end.call(this)},can_coexist_with:function(t){return!this.current_state().exclusive&&!t.current_state().exclusive},can_prevail_against:function(t){return this.current_state().priority>t.current_state().priority},retreat_against:function(t){this.nextDrivenState(this.current_state().retreat)}}})}),t.define("module:Gestures.defaultGesture",["base:Objs","module:Events.Mouse"],["module:Gestures.ElementTriggerEvent","module:Gestures.BodyTriggerEvent","module:Gestures.ElementTimerEvent","module:Gestures.ElementScrollEvent","module:Gestures.ElementScrollEndEvent","module:Gestures.ElementMouseMoveOutEvent"],function(e,n){return function(t){return t=e.extend({mouse_up_activate:!1,wait_time:750,wait_activate:!0,disable_x:10,disable_y:10,enable_x:-1,enable_y:-1,active_priority:2,disable_scroll_element:null,disable_scroll_time:500},t),{Initial:{events:e.filter([{event:"ElementTriggerEvent",args:n.downEvent(),target:"DownState"},null===t.disable_scroll_element?null:{event:"ElementScrollEvent",args:{element:t.disable_scroll_element,threshold:t.disable_scroll_time},target:"DisableScroll"}],function(t){return!!t})},DisableScroll:{events:[{event:"ElementScrollEndEvent",args:{element:t.disable_scroll_element},target:"Initial"}]},Retreat:{start:function(){this.trigger("deactivate"),this.nextDrivenState("Initial")}},DownState:{events:e.filter([null===t.mouse_up_activate?null:{event:"BodyTriggerEvent",args:n.upEvent(),target:t.mouse_up_activate?"ActiveState":"Initial",stop_propagation:!t.up_event_allow_propagation},{event:"ElementMouseMoveOutEvent",args:{x:t.disable_x,y:t.disable_y},target:"Initial"},{event:"ElementMouseMoveOutEvent",args:{x:t.enable_x,y:t.enable_y},target:"ActiveState"},null===t.wait_activate?null:{event:"ElementTimerEvent",args:t.wait_time,target:t.wait_activate?"ActiveState":"Initial"},null===t.disable_scroll_element?null:{event:"ElementScrollEvent",args:{element:t.disable_scroll_element,threshold:t.disable_scroll_time},target:"DisableScroll"}],function(t){return!!t})},ActiveState:{priority:t.active_priority,exclusive:!0,start:function(){this.trigger("activate"),this.nextDrivenState("Initial")}}}}}),t.define("module:Hardware.MouseCoords",["base:Ids","base:Objs","browser:Events","module:Events.Mouse"],function(t,e,n,i){return{__required:0,__domevents:null,coords:{x:0,y:0},require:function(){0===this.__required&&(this.__domevents=new n,this.__domevents.on(document.body,[i.moveEvent(),i.upEvent(),i.downEvent()].join(" "),function(t){var e=i.pageCoords(t);e.x&&e.y&&(this.coords=e)},this,{passive:!1})),this.__required++},unrequire:function(){this.__required--,0===this.__required&&this.__domevents.destroy()}}}),t.define("module:Helpers.Interactor",["base:Class","base:Objs","base:Types","base:Promise","base:Async","browser:Info","browser:Dom","module:Events.Mouse"],function(t,n,i,s,o,e,r,a,l){return t.extend({scoped:l},function(e){return{constructor:function(t){e.constructor.apply(this),this._options=n.extend({delay:1},t)},_element:function(t){return t?i.is_string(t)?document.querySelector(t):t:document.body},elementPositionEvent:function(t,e,n){if(!n)return this._event(t,e);n=this._element(n);var i=r.elementOffset(n),s=r.elementDimensions(n);return this._event(t,e,{pageX:i.left+s.width/2,pageY:i.top+s.height/2})},mousedown:function(t,e){return this.elementPositionEvent(t,a.downEvent(),e)},mouseup:function(t,e){return this.elementPositionEvent(t,a.upEvent(),e)},mousemoveToElement:function(t,e){return this.elementPositionEvent(e,a.moveEvent(),t)},_event:function(t,e,n){var i=s.create();return t=this._element(t),o.eventually(function(){r.triggerDomEvent(t,e,n,{bubbles:!0,propagates:!0}),i.asyncSuccess(t)},this._options.delay),i}}})}),t.define("module:Interactions.Drag",["module:Interactions.ElementInteraction","module:Elements.ElementModifier","browser:Dom","module:Events.Support","module:Events.Mouse","module:Hardware.MouseCoords","base:Ids","base:Objs","base:Async","module:Interactions.DragStates"],["module:Interactions.DragStates.Idle","module:Interactions.DragStates.Dragging","module:Interactions.DragStates.Stopping"],function(t,s,o,r,a,e,n,l,c,h,i){return t.extend({scoped:i},function(i){return{constructor:function(t,e,n){e=l.extend({start_event:a.downEvent(),stop_event:a.upEvent(),draggable_x:!0,draggable_y:!0,clone_element:!1,drag_original_element:!1,droppable:!1,remove_element_on_drop:!1,revertable:!0,draggable:function(){return!0},snappable:function(t,e){return{left:t,top:e}}},e),i.constructor.call(this,t,e,h),this._host.initialize("Idle"),this._modifier=new s(this.element()),this.data=n},destroy:function(){this._modifier.revert(),this._modifier.destroy(),i.destroy.call(this)},_enable:function(){this._options.start_event&&this.__on(this.element(),this._options.start_event,function(){c.eventually(this.start,this)})},_disable:function(){this._domEvents.clear(),this.stop()},start:function(){this._enabled&&this._host.state().next("Dragging")},stop:function(){this._enabled&&this._host.state().next("Stopping")},draggable:function(){return this._options.draggable.call(this._options.context,this)},abort:function(){this._enabled&&this._host.state().next("Idle")},dropped:function(t){this.trigger("dropped",t),this._host.state().next("Stopping",{immediately:!0}),this._options.remove_element_on_drop&&(this.element().parentNode.removeChild(this.element()),this.destroy())},actionable_element:function(){return this._host.state()._cloned_element||this.element()},modifier:function(){return this._modifier},actionable_modifier:function(){var t=this._host.state()._cloned_modifier;return t||this._modifier},__eventData:function(){return{element:this.element(),actionable_element:this.actionable_element(),modifier:this.modifier(),actionable_modifier:this.actionable_modifier(),source:this,data:this.data,page_coords:e.coords,underneath:this.__underneath}},__triggerEvent:function(t){this.trigger(t,this.__eventData())},__triggerDomEvent:function(t){var e=this.__eventData(),n=o.elementFromPoint(e.page_coords.x,e.page_coords.y,this.actionable_element());n&&r.dispatchElementEvent(n,"drag-"+t,e)},__triggerDomMove:function(){var t=this.__eventData(),e=o.elementFromPoint(t.page_coords.x,t.page_coords.y,this.actionable_element());e&&(this.__old_coords&&this.__underneath&&this.__underneath!==e&&(r.dispatchPointsSeparatorEvent(e,"drag-enter",t.page_coords,this.__old_coords,t),r.dispatchPointsSeparatorEvent(this.__underneath,"drag-leave",this.__old_coords,t.page_coords,t)),r.dispatchElementEvent(e,"drag-hover",t)),this.__underneath=e,this.__old_coords=t.page_coords}}})}),t.define("module:Interactions.DragStates.Idle",["module:Interactions.State"],function(t,e){return t.extend({scoped:e},{_white_list:["Dragging"],trigger:function(t){this.parent().__triggerEvent(t)},triggerDom:function(t){this.parent().__triggerDomEvent(t)},triggerDomMove:function(){this.parent().__triggerDomMove()}})}),t.define("module:Interactions.DragStates.Dragging",["module:Interactions.DragStates.Idle","module:Hardware.MouseCoords","module:Elements.ElementModifier","module:Events.Mouse","browser:Dom"],function(t,h,d,u,_,e){return t.extend({scoped:e},{_white_list:["Stopping"],_persistents:["initial_element_coords","cloned_element","cloned_modifier","placeholder_cloned_element"],_start:function(){var t=this.parent().options();if(this._page_coords=h.coords,t.clone_element){var e=_.elementOffset(this.element()),n=_.elementDimensions(this.element());this._initial_element_coords={x:e.left,y:e.top};var i=this.element().style.zIndex,s=n.width,o=n.height;t.drag_original_element?(this._placeholder_cloned_element=this.element().cloneNode(!0),this.element().replaceWith(this._placeholder_cloned_element),this._cloned_element=this._placeholder_cloned_element):this._cloned_element=this.element().cloneNode(!0),this._cloned_modifier=new d(this._cloned_element),this._cloned_modifier.css("position","absolute"),this._cloned_modifier.css("width",s+"px"),this._cloned_modifier.css("height",o+"px"),this._cloned_modifier.css("zIndex",i+1),this._cloned_modifier.css("left",this._initial_element_coords.x+"px"),this._cloned_modifier.css("top",this._initial_element_coords.y+"px"),document.body.appendChild(this._cloned_element)}else{var r=this.parent().modifier();if(r.css("position","relative"),this._initial_element_coords={},t.draggable_x){var a=r.css("left");"auto"!==a&&a||r.css("left","0px"),this._initial_element_coords.x=parseInt(r.css("left"),10)}if(t.draggable_y){var l=r.css("top");"auto"!==l&&l||r.css("top","0px"),this._initial_element_coords.y=parseInt(r.css("top"),10)}}this.trigger("start"),this.on(document.body,u.moveEvent(),this.__dragging,this,{passive:!1}),t.stop_event&&this.on(document.body,t.stop_event,function(){t.droppable&&this.triggerDom("drop"),"next"in this&&this.next("Stopping",{released:!0})});var c=this.parent().actionable_modifier();this._drag_coords={left:parseInt(c.css("left"),10),top:parseInt(c.css("top"),10)}},__dragging:function(t){t.preventDefault();var e=u.pageCoords(t),n=e.x-this._page_coords.x,i=e.y-this._page_coords.y;this._page_coords=e;var s=this.parent().actionable_modifier();this._drag_coords.left+=n,this._drag_coords.top+=i;var o=this.options().snappable(this._drag_coords.left,this._drag_coords.top);this.options().draggable_x&&s.css("left",o.left+"px"),this.options().draggable_y&&s.css("top",o.top+"px"),this.trigger("move"),this.options().classes&&this.options().classes["move.actionable_modifier"]&&this.parent().actionable_modifier().csscls(this.options().classes["move.actionable_modifier"],!0),this.options().classes&&this.options().classes["move.modifier"]&&this.parent().modifier().csscls(this.options().classes["move.modifier"],!0),this.triggerDomMove()}})}),t.define("module:Interactions.DragStates.Stopping",["module:Interactions.DragStates.Idle","module:Elements.DefaultAnimator"],function(t,n,e){return t.extend({scoped:e},function(e){return{_white_list:["Idle"],_locals:["initial_element_coords","cloned_element","cloned_modifier","immediately","released","placeholder_cloned_element"],_immediately:null,_start:function(){this.trigger("stopping"),this.triggerDom("stop");var t=this.options();if(!t.revertable||this._immediately)return this._released&&this.trigger("release"),void this.next("Idle");var e={};t.draggable_x&&(e.left=this._initial_element_coords.x+"px"),t.draggable_y&&(e.top=this._initial_element_coords.y+"px"),this.__animation=new n(this.parent().actionable_element(),{styles:e},function(){this.__animation&&this.next("Idle")},this),this._released&&this.trigger("release")},_end:function(){if(this.__animation){var t=this.__animation;this.__animation=null,t.complete()}this._cloned_modifier&&(this._cloned_modifier.revert(),this._cloned_modifier.destroy()),this._cloned_element&&(this._placeholder_cloned_element&&this._placeholder_cloned_element.replaceWith(this._cloned_element),this._cloned_element.parentNode.removeChild(this._cloned_element)),this.parent().modifier().revert(),this.trigger("stop"),e._end.call(this)}}})}),t.define("module:Interactions.Droplist",["module:Interactions.ElementInteraction","base:Objs","base:Types","module:Interactions.DroplistStates","browser:Dom"],["module:Interactions.DroplistStates.Disabled","module:Interactions.DroplistStates.Idle","module:Interactions.DroplistStates.Hover","module:Interactions.DroplistStates.Dropping"],function(t,s,o,r,a,e){return t.extend({scoped:e},function(i){return{constructor:function(t,e,n){e=s.extend({droppable:function(){return!0},context:this,bounding_box:function(t){return t},floater:null},e),i.constructor.call(this,t,e,r),this._host.initialize("Idle"),this.data=n,this._floater=o.is_string(this._options.floater)?t.parentElement.querySelector(this._options.floater):a.unbox(this._options.floater),this._floater.style.display="none"},_enable:function(){this._host.state().next("Idle")},_disable:function(){this._host.state().next("Disabled")},__eventData:function(){return{index:a.elementIndex(this._floater),element:this.element(),target:this,data:this.data,source:this._host.state()._drag_source?this._host.state()._drag_source:null}},__triggerEvent:function(t){this.trigger(t,this.__eventData())},droppable:function(t){return this._options.droppable.call(this._options.context,t,this)},__update_floater:function(t){this._floater.style.display="none";var e=t.page_coords,n=a.childContainingElement(this.element(),t.underneath);if(n)if(n!==this._floater){var i=a.elementBoundingBox(n);(i=this._options.bounding_box.call(this._options.context,i)).top<=e.y&&e.y<=i.bottom||(this._floater.style.display="",e.y<i.top?a.elementInsertBefore(this._floater,n):a.elementInsertAfter(this._floater,n))}else this._floater.style.display=""},insertAt:function(t,e){a.elementInsertAt(t,this.element(),e)}}})}),t.define("module:Interactions.DroplistStates.Disabled",["module:Interactions.State"],function(t,e){return t.extend({scoped:e},{_white_list:["Idle"],trigger:function(t){this.parent().__triggerEvent(t)}})}),t.define("module:Interactions.DroplistStates.Idle",["module:Interactions.DroplistStates.Disabled"],function(t,e){return t.extend({scoped:e},{_white_list:["Hover","Disabled"],_start:function(){this.on(this.element(),"drag-hover",function(t){var e=t.detail;this.parent().droppable(e)&&this.next("Hover")})}})}),t.define("module:Interactions.DroplistStates.Hover",["module:Interactions.DroplistStates.Disabled"],function(t,e){return t.extend({scoped:e},function(t){return{_white_list:["Idle","Disabled","Dropping"],_persistents:["drag_source"],_start:function(){this.trigger("hover"),this.on(this.element(),"drag-hover",function(t){this._drag_source=t.detail,this.parent().__update_floater(this._drag_source)}),this.on(this.element(),"drag-stop drag-leave",function(t){this._drag_source=t.detail,this.next("Idle")}),this.on(this.element(),"drag-drop",function(t){this._drag_source=t.detail,this.parent().__update_floater(this._drag_source),this.next("none"==this.parent()._floater.style.display?"Idle":"Dropping")})},_end:function(){this.trigger("unhover"),this.parent()._floater.style.display="none",t._end.call(this)}}})}),t.define("module:Interactions.DroplistStates.Dropping",["module:Interactions.DroplistStates.Disabled"],function(t,e){return t.extend({scoped:e},{_white_list:["Idle","Disabled"],_persistents:["drag_source"],_start:function(){this._drag_source.source.dropped(this.parent()),this.trigger("dropped"),this.next("Idle")}})}),t.define("module:Interactions.Drop",["module:Interactions.ElementInteraction","base:Objs","module:Elements.ElementModifier","module:Interactions.DropStates","browser:Dom"],["module:Interactions.DropStates.Disabled","module:Interactions.DropStates.Idle","module:Interactions.DropStates.Hover","module:Interactions.DropStates.InvalidHover","module:Interactions.DropStates.Dropping"],function(t,s,o,r,a,e){return t.extend({scoped:e},function(i){return{constructor:function(t,e,n){e=s.extend({droppable:function(){return!0},context:this,bounding_box:function(t){return t},snapableX:!1,snapableY:!1},e),i.constructor.call(this,t,e,r),this._host.initialize("Idle"),this._modifier=new o(this.element()),this.data=n},destroy:function(){this._modifier.revert(),this._modifier.destroy(),i.destroy.call(this)},_enable:function(){this._host.state().next("Idle")},_disable:function(){this._host.state().next("Disabled")},modifier:function(){return this._modifier},__eventData:function(){return{element:this.element(),modifier:this.modifier(),target:this,data:this.data,source:this._host.state()._drag_source?this._host.state()._drag_source:null}},__triggerEvent:function(t){this.trigger(t,this.__eventData())},droppable:function(t){return this._options.droppable.call(this._options.context,t,this)},_is_hovering:function(t){if(!t.source.options().droppable)return!1;var e=a.elementBoundingBox(this.element());e=this._options.bounding_box.call(this._options.context,e);var n=t.page_coords;return e.left<=n.x&&n.x<=e.right&&e.top<=n.y&&n.y<=e.bottom}}})}),t.define("module:Interactions.DropStates.Disabled",["module:Interactions.State"],function(t,e){return t.extend({scoped:e},{_white_list:["Idle"],trigger:function(t){this.parent().__triggerEvent(t)}})}),t.define("module:Interactions.DropStates.Idle",["module:Interactions.DropStates.Disabled"],function(t,e){return t.extend({scoped:e},{_white_list:["Hover","InvalidHover","Disabled"],_start:function(){this.on(this.element(),"drag-hover",function(t){if(this.parent()._enabled){var e=t.detail;this.parent()._is_hovering(e)&&this.next(this.parent().droppable(e)?"Hover":"InvalidHover",{drag_source:e})}})}})}),t.define("module:Interactions.DropStates.Hover",["module:Interactions.DropStates.Disabled","browser:Dom"],function(t,h,e){return t.extend({scoped:e},function(t){return{_white_list:["Idle","Disabled","Dropping"],_persistents:["drag_source"],_start:function(){this.trigger("hover"),this.options().classes&&this.options().classes["hover.modifier"]&&this.parent().modifier().csscls(this.options().classes["hover.modifier"],!0),this.on(this.element(),"drag-hover",function(t){this._drag_source=t.detail,this._dragSnap(this.element(),this._drag_source.actionable_element),this.parent()._is_hovering(this._drag_source)||this.next("Idle")}),this.on(this.element(),"drag-stop drag-leave",function(t){this._drag_source=t.detail,this.next("Idle")}),this.on(this.element(),"drag-drop",function(t){this._drag_source=t.detail,this.next("Dropping")})},_end:function(){this.trigger("unhover"),this.parent().modifier().revert(),t._end.call(this)},_dragSnap:function(t,e){if(this.options().snapableX||this.options().snapableY){var n=h.elementOffset(t),i=h.elementDimensions(t),s=h.elementOffset(e),o=h.elementDimensions(e),r=s.left+o.width/2,a=s.top+o.height/2,l=n.left+i.width/2,c=n.top+i.height/2;this.options().snapableX&&Math.abs(r-l)<=this.options().snapableX&&(e.style.left=l-o.width/2+"px"),this.options().snapableY&&Math.abs(a-c)<=this.options().snapableY&&(e.style.top=c-o.height/2+"px")}}}})}),t.define("module:Interactions.DropStates.InvalidHover",["module:Interactions.DropStates.Disabled"],function(t,e){return t.extend({scoped:e},function(t){return{_white_list:["Idle","Disabled"],_persistents:["drag_source"],_start:function(){this.trigger("hover-invalid"),this.on(this.element(),"drag-hover",function(t){this._drag_source=t.detail,this.parent()._is_hovering(this._drag_source)||this.next("Idle")}),this.on(this.element(),"drag-drop drag-stop drag-leave",function(t){this._drag_source=t.detail,this.next("Idle")})},_end:function(){this.trigger("unhover"),this.parent().modifier().revert(),t._end.call(this)}}})}),t.define("module:Interactions.DropStates.Dropping",["module:Interactions.DropStates.Disabled"],function(t,e){return t.extend({scoped:e},{_white_list:["Idle","Disabled"],_persistents:["drag_source"],_start:function(){this._drag_source.source.dropped(this.parent()),this.trigger("dropped"),this.next("Idle")}})}),t.define("module:Interactions.Infinitescroll",["module:Interactions.Scroll","base:Objs","base:Async","module:Interactions.InfinitescrollStates","browser:Dom"],["module:Interactions.InfinitescrollStates.Idle","module:Interactions.InfinitescrollStates.Scrolling","module:Interactions.InfinitescrollStates.ScrollingTo"],function(t,s,o,r,a,e){return t.extend({scoped:e},function(i){return{constructor:function(t,e,n){e=s.extend({append_count:25,prepend_count:25,height_factor:3,whitespace_bottom:!1,context:null,append:null,prepend:null},e),i.constructor.call(this,t,e,n,r),this._can_append=!!e.append,this._can_prepend=!!e.prepend,this._extending=!1,e.prepend&&this.options().whitespace&&(this.__top_white_space=this._whitespaceCreate(),a.elementPrependChild(this.itemsElement(),this.__top_white_space)),this.options().whitespace_bottom&&(this.__bottom_white_space=this._whitespaceCreate(),this.itemsElement().appendChild(this.__bottom_white_space)),o.eventually(function(){this.destroyed()||this.reset(!0)},this)},append:function(t){var e=this.options();if(this._can_append&&!this._extending){this._extending=!0;var n=this;e.append.call(e.context,t||e.append_count,function(t,e){n.__bottom_white_space&&n.itemsElement().appendChild(n.__bottom_white_space),n._extending=!1,n._can_append=e,n.appended(t)})}},appendNeeded:function(){var t=this.element().scrollHeight,e=this.element().clientHeight;return t-(this.element().scrollTop+e)-this._whitespaceGetHeight(this.__bottom_white_space)<this.options().height_factor*e},prependNeeded:function(){if(!this.options().prepend)return!1;var t=this.element().clientHeight;return this.element().scrollTop-this._whitespaceGetHeight(this.__top_white_space)<this.options().height_factor*t},prepend:function(t){var e=this.options();if(this._can_prepend&&!this._extending){this._extending=!0;var n=this;e.prepend.call(e.context,t||e.prepend_count,function(t,e){n.__top_white_space&&a.elementPrependChild(n.itemsElement(),n.__top_white_space),n._extending=!e,n.prepended(t)})}},appended:function(t){},prepended:function(t){var e=this.itemsElement().children[1],n=this.itemsElement().children[t],i=a.elementOffset(n).top-a.elementOffset(e).top+a.elementDimensions(n).height;this.scrolling()?this._whitespaceSetHeight(this.__top_white_space,this._whitespaceGetHeight(this.__top_white_space)-i):this.element().scrollTop=this.element().scrollTop-i},extendFix:function(){this.scrollingDirection()?this.appendNeeded()&&this.append():this.prependNeeded()&&this.prepend()},_whitespaceFix:function(){if(this.__top_white_space){var t=this._whitespaceGetHeight(this.__top_white_space);this._whitespaceSetHeight(this.__top_white_space,this.options().whitespace),this.element().scrollTop=Math.max(this.options().whitespace,this.element().scrollTop+this.options().whitespace-t)}},reset:function(t){this._whitespaceSetHeight(this.__bottom_white_space,this.options().whitespace),this.options().prepend&&(this._whitespaceSetHeight(this.__top_white_space,this.options().whitespace),this.element().scrollTop=this.options().whitespace+(t?this.element().scrollTop:0),this.__top_white_space.clientHeight||o.eventually(this.reset,this,100))}}})}),t.define("module:Interactions.InfinitescrollStates.Idle",["module:Interactions.ScrollStates.Idle"],function(t,e){return t.extend({scoped:e},{})}),t.define("module:Interactions.InfinitescrollStates.Scrolling",["module:Interactions.ScrollStates.Scrolling"],function(t,e){return t.extend({scoped:e},{_scroll:function(){this.parent().extendFix()},_scrollend:function(){this.parent()._whitespaceFix()}})}),t.define("module:Interactions.InfinitescrollStates.ScrollingTo",["module:Interactions.ScrollStates.ScrollingTo"],function(t,e){return t.extend({scoped:e},{_scroll:function(){this.parent().extendFix()},_scrollend:function(){this.parent()._whitespaceFix()}})}),t.define("module:Interactions.ElementInteraction",["base:Class","base:Events.EventsMixin","module:Hardware.MouseCoords","base:Async","base:States.Host","base:Ids","base:Objs","base:Classes.ClassRegistry","browser:Dom","browser:Events"],function(t,e,o,r,a,n,i,l,c,h,s){return t.extend({scoped:s},[e,function(s){return{constructor:function(t,e,n){if(s.constructor.call(this),this._domEvents=new h,o.require(),this._element=c.unbox(t),this._enabled=!1,this._options=e||{},"enabled"in this._options){var i=this._options.enabled;delete this._options.enabled,i&&r.eventually(this.enable,this)}this._host=new a({stateRegistry:n?new l(n):null}),this._host.parent=this},__on:function(t,e,n,i,s){this._domEvents.on(c.unbox(t),e,n,i||this,s)},destroy:function(){this._domEvents.destroy(),this.disable(),this._host.destroy(),o.unrequire(),s.destroy.call(this)},enable:function(){this._enabled||this.destroyed()||(this._enabled=!0,this._enable())},disable:function(){this._enabled&&(this._enabled=!1,this._disable())},element:function(){return this._element},options:function(){return this._options},_enable:function(){},_disable:function(){}}}],{multiple:function(t,e,n,i){for(var s=0;s<t.length;++s){var o=new this(t[s],e);n&&n.call(i||o,o)}}})}),t.define("module:Interactions.State",["base:States.State","browser:Events","browser:Dom","base:Ids","base:Objs"],function(t,e,o,n,i,s){return t.extend({scoped:s},function(t){return{constructor:function(){t.constructor.apply(this,arguments),this._domEvents=this.auto_destroy(new e)},parent:function(){return this.host.parent},element:function(){return this.parent().element()},options:function(){return this.parent().options()},on:function(t,e,n,i,s){this._domEvents.on(o.unbox(t),e,function(t){this.destroyed()||(n.apply(i||this,arguments),t.preventDefault())},this,s)},_end:function(){this._domEvents.clear()}}})}),t.define("module:Interactions.Loopscroll",["module:Interactions.Scroll","module:Interactions.LoopscrollStates","browser:Dom"],["module:Interactions.LoopscrollStates.Idle","module:Interactions.LoopscrollStates.Scrolling","module:Interactions.LoopscrollStates.ScrollingTo"],function(t,s,u,e){return t.extend({scoped:e},function(i){return{constructor:function(t,e,n){i.constructor.call(this,t,e,n,s),this.__top_white_space=this._whitespaceCreate(),u.elementPrependChild(this.itemsElement(),this.__top_white_space),this.__bottom_white_space=this._whitespaceCreate(),this.itemsElement().appendChild(this.__bottom_white_space),this.reset(!0)},_rotateFix:function(){var t=this.itemsElement().children,e=this._whitespaceGetHeight(this.__top_white_space),n=this._whitespaceGetHeight(this.__bottom_white_space),i=this.element().scrollHeight,s=this.element().clientHeight,o=i-e-n,r=this.element().scrollTop,a=t.length-2,l=(r-e)/o*a,c=(o-(r-e)-s)/o*a;if(l<c-1)for(;l<c-1;){var h=t[t.length-2];u.elementInsertAfter(h,this.__top_white_space),e-=u.elementDimensions(h).height,this._whitespaceSetHeight(this.__top_white_space,e),c--,l++}else if(c<l-1)for(;c<l-1;){var d=t[1];u.elementInsertBefore(d,this.__bottom_white_space),e+=u.elementDimensions(d).height,this._whitespaceSetHeight(this.__top_white_space,e),c++,l--}},_whitespaceFix:function(){this._whitespaceSetHeight(this.__bottom_white_space,this.options().whitespace);var t=this._whitespaceGetHeight(this.__top_white_space);this._whitespaceSetHeight(this.__top_white_space,this.options().whitespace),this.element().scrollTop=this.element().scrollTop+this.options().whitespace-t},reset:function(t){this._whitespaceSetHeight(this.__bottom_white_space,this.options().whitespace),this._whitespaceSetHeight(this.__top_white_space,this.options().whitespace),this.element().scrollTop=this.options().whitespace+(t?this.element().scrollTop:0),this._currentElementUpdate()}}})}),t.define("module:Interactions.LoopscrollStates.Idle",["module:Interactions.ScrollStates.Idle"],function(t,e){return t.extend({scoped:e},{})}),t.define("module:Interactions.LoopscrollStates.Scrolling",["module:Interactions.ScrollStates.Scrolling"],function(t,e){return t.extend({scoped:e},{_scroll:function(){this.parent()._rotateFix()},_scrollend:function(){this.parent()._whitespaceFix()}})}),t.define("module:Interactions.LoopscrollStates.ScrollingTo",["module:Interactions.ScrollStates.ScrollingTo"],function(t,e){return t.extend({scoped:e},{_scroll:function(){this.parent()._rotateFix()},_scrollend:function(){this.parent()._whitespaceFix()}})}),t.define("module:Interactions.Pinch",["module:Interactions.ElementInteraction","module:Interactions.PinchStates"],["module:Interactions.PinchStates.Idle","module:Interactions.PinchStates.Pinching"],function(t,s,e){return t.extend({scoped:e},function(i){return{constructor:function(t,e,n){i.constructor.call(this,t,e,s),this._host.initialize("Idle"),this.data=n},_disable:function(){this.stop()},start:function(){this._enabled&&this._host.state().next("Pinching")},stop:function(){this._enabled&&this._host.state().next("Idle")},__eventData:function(){var t=this._host.state();return{element:this.element(),source:this,data:this.data,initial:t._initial_coords,delta_last:t._delta_last}},__triggerEvent:function(t){this.trigger(t,this.__eventData())}}})}),t.define("module:Interactions.PinchStates.Idle",["module:Interactions.State","module:Events.Mouse"],function(t,e,n){return t.extend({scoped:n},{_white_list:["Pinching"],trigger:function(t){this.parent().__triggerEvent(t)},_start:function(){this.on(this.element(),"touchstart",function(t){this.parent()._enabled&&t.touches&&2==t.touches.length&&this.next("Pinching",{initial_coords:e.clientCoords(t,!0)})})}})}),t.define("module:Interactions.PinchStates.Pinching",["module:Interactions.PinchStates.Idle","module:Events.Mouse"],function(t,e,n){return t.extend({scoped:n},function(t){return{_white_list:["Idle"],_persistents:["initial_coords","current_coords"],_initial_coords:null,_start:function(){this._last_coords=null,this._current_coords=this._initial_coords,this.trigger("pinchstart"),this.on(this.element(),"touchmove",function(t){t.touches&&2==t.touches.length?this.__pinching(t):this.next("Idle")}),this.on(this.element(),"touchend",function(){this.next("Idle")})},_end:function(){this.trigger("pinchstop"),t._end.call(this)},__pinching:function(t){t.preventDefault(),this._last_coords=this._current_coords,this._current_coords=e.clientCoords(t,!0),this.__compute_values(),this.trigger("pinch")},__compute_values:function(){var t=function(t,e){return t[0][e]<=t[1][e]?t[0][e]:t[1][e]},e=function(t,e){return t[0][e]>=t[1][e]?t[0][e]:t[1][e]};this._delta_last={x:t(this._last_coords,"x")-t(this._current_coords,"x")+e(this._current_coords,"x")-e(this._last_coords,"x"),y:t(this._last_coords,"y")-t(this._current_coords,"y")+e(this._current_coords,"y")-e(this._last_coords,"y")}}}})}),t.define("module:Interactions.Scroll",["module:Interactions.ElementInteraction","base:Objs","base:Types","base:Async","browser:Dom","module:Interactions.ScrollStates"],function(t,o,e,r,l,a,n){return t.extend({scoped:n},function(s){return{constructor:function(t,e,n,i){i=i||a,e=o.extend({discrete:!1,currentCenter:!1,currentTop:!0,scrollEndTimeout:50,whitespace:1e4,display_type:"",elementMargin:20,enable_scroll_modifier:"scroll",currentElementClass:null,discreteUpperThreshold:.5,discreteLowerThreshold:.5,scrollToOnClick:!1},e),s.constructor.call(this,t,e,i),this._itemsElement=l.unbox(e.itemsElement||t),this._disableScrollCounter=0,this._host.initialize("Idle"),this._scrollingDirection=!0,this._lastScrollTop=null,this._lastCurrentElement=null,this.__on(this.element(),"scroll",function(){var t=this.element().scrollTop;null!==this._lastScrollTop&&(this._host.state().instance_of(i.ScrollingTo)||(this._scrollingDirection=t>=this._lastScrollTop)),this._lastScrollTop=t,this._currentElementUpdate()}),this._options.scrollToOnClick&&this.__on(this.element(),"click",function(t){t.preventDefault(),t.stopPropagation();var e=l.elementFromPoint(t.pageX,t.pageY,null,this.itemsElement());this.scrollToElement(e,{animate:!0,abortable:!0})}),this._options.discrete&&r.eventually(function(){this.destroyed()||this.scrollToElement(this.currentElement(),{animate:!0,abortable:!0})},this)},_whitespaceType:function(){return this.options().display_type?this.options().display_type:0<=((window.getComputedStyle?window.getComputedStyle(this.element()):this.element().style).display||"").toLowerCase().indexOf("flex")?"flex":"default"},_whitespaceCreate:function(){var e=document.createElement("whitespace");return"flex"===this._whitespaceType()?["-ms-flexbox","-webkit-flex","flex"].forEach(function(t){e.style.display=t}):e.style.display="block",e},_whitespaceGetHeight:function(t){return t?l.elementDimensions(t).height:0},_whitespaceSetHeight:function(e,n){e&&("flex"===this._whitespaceType()?["-webkit-flex","-ms-flex","flex"].forEach(function(t){e.style[t]="0 0 "+n+"px"}):e.style.height=n+"px")},itemsElement:function(){return this._itemsElement},scrollingDirection:function(){return this._scrollingDirection},currentElement:function(){var t=l.elementOffset(this.element()),e=this._options.currentTop?this._options.elementMargin:this.element().clientHeight-1-this._options.elementMargin,n=this.element().clientWidth/2,i=l.elementFromPoint(t.left+n,t.top+e,null,this.itemsElement());if(!i)return null;if(!this._options.currentCenter)return i;var s=l.elementOffset(i),o=l.elementDimensions(i),r=(this._options.currentTop?s.top+o.height-t.top:t.top+e-s.top)/o.height,a=(this._options.currentTop,!this.scrollingDirection());return r<this._options[a?"discreteUpperThreshold":"discreteLowerThreshold"]&&(i=this._options.currentTop?i.nextElementSibling:i.previousElementSibling),i},scrollTo:function(t,e){var n=t-(this._options.currentTop?0:this.element().clientHeight-1);(e=e||{}).scroll_top=n,this._host.state().next("ScrollingTo",e)},scrollToElement:function(t,e){if(t=l.unbox(t)){var n=l.elementOffset(t).top-l.elementOffset(this.element()).top+this.element().scrollTop;this.scrollTo(n+(this._options.currentTop?0:l.elementDimensions(t).height-1),e)}},disableScroll:function(){0===this._disableScrollCounter&&(this.element().style.overflow="hidden"),this._disableScrollCounter++},enableScroll:function(){this._disableScrollCounter--,0===this._disableScrollCounter&&(this.element().style.overflow=this._options.enable_scroll_modifier)},scrolling:function(){return"Idle"!==this._host.state().state_name()},_currentElementUpdate:function(){var t=this.currentElement();t!==this._lastCurrentElement&&(this._options.currentElementClass&&(this._lastCurrentElement&&l.elementRemoveClass(this._lastCurrentElement,this._options.currentElementClass),l.elementAddClass(t,this._options.currentElementClass)),this.trigger("change-current-element",t,this._lastCurrentElement),this._lastCurrentElement=t)}}})}),t.define("module:Interactions.ScrollStates.Idle",["module:Interactions.State"],function(t,e){return t.extend({scoped:e},{itemsElement:function(){return this.parent().itemsElement()},_start:function(){this.on(this.element(),"scroll",function(){this.next("Scrolling")})}})}),t.define("module:Interactions.ScrollStates.Scrolling",["module:Interactions.ScrollStates.Idle"],function(t,e){return t.extend({scoped:e},function(t){return{_start:function(){this.__timer=null,this.on(this.element(),"scroll",function(){this._scroll(),this.parent().trigger("scroll"),clearTimeout(this.__timer);var e=this.options(),n=this;this.__timer=setTimeout(function(){n.parent().disableScroll(),n.parent().trigger("scrollend"),n._scrollend();var t=n.parent().currentElement();e.discrete&&t?n.parent().scrollToElement(t,{animate:!0,abortable:!0}):n.eventualNext("Idle")},e.scrollEndTimeout)})},_scroll:function(){},_scrollend:function(){},_end:function(){clearTimeout(this.__timer),this.parent().enableScroll(),t._end.call(this)}}})}),t.define("module:Interactions.ScrollStates.ScrollingTo",["module:Interactions.ScrollStates.Idle","module:Elements.DefaultAnimator"],function(t,e,n){return t.extend({scoped:n},function(t){return{_locals:["scroll_top","animate","abortable"],_scroll_top:null,_abortable:null,_start:function(){this._abortable||this.parent().disableScroll(),this.parent().trigger("scrollto"),this.on(this.element(),"scroll",function(){this._scroll()}),this._abortable&&(this.on(this.element(),"wheel",function(){this._moved=!0,this._abort()}),this.on(this.element(),"touchstart",function(){this._moved=!0,this._abort()})),this.suspend(),this._animate?(this._animation=new e(this.element(),{styles:{scrollTop:this._scroll_top}},this._finished,this),this._animation.start()):(this.element().scrollTop=this._scroll_top,this._scroll(),this._finished())},_abort:function(){this._aborted||(this._aborted=!0,this._animate?(this._animation&&this._animation.complete(),this._animation=null):this._finished())},_finished:function(){this.parent().trigger("scrolltoend"),this.destroyed()||(this._scrollend(),this._transitioning?this.eventualResume():(this.resume(),this.eventualNext(this._moved?"Scrolling":"Idle")))},_scroll:function(){},_scrollend:function(){},_transition:function(){this._abort()},_end:function(){this._abortable||this.parent().enableScroll(),this._animation&&this._animation.weakDestroy(),t._end.call(this)}}})}),t.define("module:Interactions.Shiftscroll",["module:Interactions.Scroll","base:Async","browser:Dom"],function(t,e,n,i){return t.extend({scoped:i},function(t){return{constructor:function(){t.constructor.apply(this,arguments),this.__bottom_white_space=this._whitespaceCreate(),this.itemsElement().appendChild(this.__bottom_white_space),this._whitespaceFix(),e.eventually(this._whitespaceFix,this)},_whitespaceFix:function(){var t=this.element().clientHeight,e=n.elementDimensions(this.itemsElement().firstElementChild).height;this._whitespaceSetHeight(this.__bottom_white_space,t-e)}}})})}).call(Scoped);
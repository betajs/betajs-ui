<!DOCTYPE html>
<html>
    <head>
        <script src="jquery.min.js"></script>
        <script src="jquery-ui.min.js"></script>
        <script src="beta.js"></script>
        <script src="../dist/jquery-touch-gestures.js"></script>
        <link rel="stylesheet" href="styles.css" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    </head>
    <body style="-webkit-overflow-scrolling: touch">
    	<div class="doodads">
	        <div class="doodad"><div class="inner">Doodad 1</div></div>
	        <div class="doodad"><div class="inner">Doodad 2</div></div>
	        <div class="doodad"><div class="inner">Doodad 3</div></div>
	        <div class="doodad"><div class="inner">Doodad 4</div></div>
	        <div class="doodad"><div class="inner">Doodad 5</div></div>
	        <div class="doodad"><div class="inner">Doodad 6</div></div>
	        <div class="doodad"><div class="inner">Doodad 7</div></div>
	        <div class="doodad"><div class="inner">Doodad 8</div></div>
	        <div class="doodad"><div class="inner">Doodad 9</div></div>
	        <div class="doodad"><div class="inner">Doodad 10</div></div>
	        <div class="doodad"><div class="inner">Doodad 11</div></div>
	        <div class="doodad"><div class="inner">Doodad 12</div></div>
	        <div class="doodad"><div class="inner">Doodad 13</div></div>
	        <div class="doodad"><div class="inner">Doodad 14</div></div>
	        <div class="doodad"><div class="inner">Doodad 15</div></div>
	        <div class="doodad"><div class="inner">Doodad 16</div></div>
	        <div class="doodad"><div class="inner">Doodad 17</div></div>
	        <div class="doodad"><div class="inner">Doodad 18</div></div>
	        <div class="doodad"><div class="inner">Doodad 19</div></div>
	        <div class="doodad"><div class="inner">Doodad 20</div></div>
    	</div>
        <script>
        	var actions = {
        		"other": {less: -1/4},
        		"archive": {greater: 1/4, less: 1/3},
        		"delete": {greater: 1/3}
        	};
			$(".doodad .inner").each(function () {
				BetaJS.UI.Gestures.register(this, BetaJS.UI.Gestures.swipeMachine({}, {
	                drag: function() {
	                    var elem = $(this);
	                    var parent = elem.parent();                    
	                    var x = parseInt(elem.css("left"), 10);
	                    var w = document.width;
	                    var a = {};
	                    for (var cls in actions) {
	                    	a = actions[cls];
	                    	if ((!a.less || x <= w * a.less) && (!a.greater || x >= w * a.greater))
	                    		parent.addClass(cls);
	                    	else
	                    		parent.removeClass(cls);
	                    }
	                },
	                finish: function () {
	                    var elem = $(this);
	                    var x = parseInt(elem.css("left"), 10);
	                    var w = document.width;
	                    for (var cls in actions) {
	                    	a = actions[cls];
	                    	if ((!a.less || x <= w * a.less) && (!a.greater || x >= w * a.greater)) {
		                        elem.parent().slideUp();
		                        return false;
	                    	}
	                    }
	                    return true;
	                }
				}));
				BetaJS.UI.Gestures.register(this, BetaJS.UI.Gestures.clickMachine({}, {
					click: function () {
		               alert("Open " + $(this).text()); 
					}
				}));
			});
        </script>    
    </body>
</html>
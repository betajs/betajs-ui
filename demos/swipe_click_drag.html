<!DOCTYPE html>
<html>
    <head>
        <script src="assets/jquery.min.js"></script>
        <script src="assets/beta.js"></script>
        <script src="../dist/beta-ui.js"></script>
        <link rel="stylesheet" href="assets/styles.css" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    </head>
    <body>
    	<div class="doodads">
	        <div class="doodad"><div class="inner" id="dragme">Doodad 1</div></div>
	        <div class="doodad"><div class="inner">Doodad 2</div></div>
	        <div class="doodad"><div class="inner">Doodad 3</div></div>
	        <div class="doodad"><div class="inner">Doodad 4</div></div>
	        <div class="doodad"><div class="inner">Doodad 5</div></div>
	        <div class="doodad"><div class="inner">Doodad 6</div></div>
	        <div class="doodad"><div class="inner">Doodad 7</div></div>
	        <div class="doodad"><div class="inner">Doodad 8</div></div>
	        <div class="doodad"><div class="inner">Doodad 9</div></div>
	        <div class="doodad"><div class="inner">Doodad 10</div></div>
	        <div class="doodad"><div class="inner">Doodad 11</div></div>
	        <div class="doodad"><div class="inner">Doodad 12</div></div>
	        <div class="doodad"><div class="inner">Doodad 13</div></div>
	        <div class="doodad"><div class="inner">Doodad 14</div></div>
	        <div class="doodad"><div class="inner">Doodad 15</div></div>
	        <div class="doodad"><div class="inner">Doodad 16</div></div>
	        <div class="doodad"><div class="inner">Doodad 17</div></div>
	        <div class="doodad"><div class="inner">Doodad 18</div></div>
	        <div class="doodad"><div class="inner">Doodad 19</div></div>
	        <div class="doodad"><div class="inner">Doodad 20</div></div>
    	</div>
        <script>
        	BetaJS.UI.Interactions.Drag.multiple($(".doodad"), {
                enabled : true,
                clone_element: true,
				start_event: null                
            }, function (drag) {
	            var drag_gesture = new BetaJS.UI.Gestures.Gesture(drag.element(), BetaJS.UI.Gestures.defaultGesture({
			    	mouse_up_activate: false,
			        wait_time: 750,
			        wait_activate: true,
			        disable_x: 10,
			        disable_y: 10,
			        enable_x: -1,
			        enable_y: -1,
	            }));
	            drag_gesture.on("activate", drag.start, drag);
	            drag_gesture.on("deactivate", drag.stop, drag);
	            drag.on("move", function (event) {
	            	event.actionable_modifier.csscls("focus", true);
	            	event.modifier.csscls("unfocus", true);
	            });
	        });
        	var actions = {
        		"other": {less: -1/4},
        		"archive": {greater: 1/4, less: 1/3},
        		"delete": {greater: 1/3}
        	};
        	BetaJS.UI.Interactions.Drag.multiple($(".inner"), {
                enabled : true,
                draggable_y: false,
                start_event: null
            }, function (drag) {
	            var drag_gesture = new BetaJS.UI.Gestures.Gesture(drag.element(), BetaJS.UI.Gestures.defaultGesture({
			    	mouse_up_activate: false,
			        wait_time: 750,
			        wait_activate: false,
			        disable_x: -1,
			        disable_y: 10,
			        enable_x: 10,
			        enable_y: -1,
	            }));
	            drag_gesture.on("activate", drag.start, drag);
	            drag_gesture.on("deactivate", drag.stop, drag);
	            drag.on("move", function (event) {
	            	var element = event.element;
	            	var parent = element.parent();
	                var x = parseInt(element.css("left"), 10);
	                var w = document.width;
	                var a = {};
	                for (var cls in actions) {
	                	a = actions[cls];
	                	if ((!a.less || x <= w * a.less) && (!a.greater || x >= w * a.greater))
	                		parent.addClass(cls);
	                	else
	                		parent.removeClass(cls);
	                }
	            });
	            drag.on("release", function (event) {
	            	var element = event.element;
	            	var parent = element.parent();
	                var x = parseInt(element.css("left"), 10);
	                var w = document.width;
	                for (var cls in actions) {
	                	a = actions[cls];
	                	if ((!a.less || x <= w * a.less) && (!a.greater || x >= w * a.greater)) {
	                        event.source.abort();
	                        parent.slideUp();
	                	}
	                }
	            });
	        });
	        $(".inner").each(function () {
	        	var element = $(this);
		        var click_gesture = new BetaJS.UI.Gestures.Gesture(element, BetaJS.UI.Gestures.defaultGesture({
			    	mouse_up_activate: true,
			        wait_time: 250,
			        wait_activate: false,
			        disable_x: 10,
			        disable_y: 10,
			        enable_x: -1,
			        enable_y: -1,
	            }));
	            click_gesture.on("activate", function () {
	            	alert("click");
	            });
	        });
        </script>    
    </body>
</html>